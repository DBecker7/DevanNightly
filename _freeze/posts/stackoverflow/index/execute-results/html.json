{
  "hash": "a1c0cc7eb20fa068f586892652857465",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Stackoverflow Analysis\"\nauthor: \"Devan Becker\"\ndate: \"2025-04-18\"\ncategories: [fun, analysis]\nexecute:\n  echo: true\n---\n\n\n\nThis post is the start of an analysis of stackoverflow data that was initially intended for an example assignment in a course. The code was starting to look a little scary, so I decided not to show it.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsuppressPackageStartupMessages({\n  library(here)\n  library(tidyverse)\n  library(patchwork)\n  library(ggridges)\n})\ntheme_set(theme_bw())\n\n# Downloaded from https://survey.stackoverflow.co/\nso <- read_csv(\n  here(\"data\", \"survey_results_public.csv.gz\"),\n  show_col_types = FALSE\n) |> \n  as_tibble()\n```\n:::\n\n\n\n# Introduction\n\nStackOverflow is the go-to location for developers, data scientists, and students trying to solve coding issues that they are facing. Each year, they survey their users to get an idea of the demographics. In this survey, they include their job, education level, and their income, along with how they learned to code.\n\n# Goals\n\nIn this work, I'll look at how education level affects income. I'm restricting my analysis to people who code in R or python who work in a data-related field.\n\n# Basic Data Cleaning\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nso_work <- so |>\n    select(\n        YearsCode, Currency, CompTotal, DevType,\n        LanguageHaveWorkedWith, EdLevel, WorkExp, Age,\n    ) |>\n    # Only data-related and academia-related devtypes\n    # Note that spaces are meaningful!\n    filter(str_detect(tolower(DevType), \"(data | ai|researcher|student)\")) |>\n    mutate(\n        DevClass = case_when(\n            str_detect(tolower(DevType), \"(data | ai)\") ~ \"Data Science\",\n            str_detect(tolower(DevType), \"(researcher)\") ~ \"Academic\",\n            str_detect(tolower(DevType), \"(student)\") ~ \"Student\",\n        )\n    ) |>\n    # Only people who have worked with R, python or Julia\n    filter(str_detect(LanguageHaveWorkedWith, \"R|Python|Julia|SQL\")) |>\n    # Split the Education Level at all spaces, then take the first word\n    mutate(\n        EdLevel = str_split_i(EdLevel, pattern = \" \", i = 1)\n    ) |>\n    # Fix some cases where the first word of EdLevel is not informative\n    mutate(\n        EdLevel = case_when(\n            EdLevel == \"Some\" ~ \"Some College/University\",\n            EdLevel == \"Something\" ~ \"Other\",\n            .default = EdLevel\n        )\n    ) |>\n    # The first three letters of `Currency` are the country code\n    mutate(Currency = str_sub(Currency, 1, 3)) |>\n    # If Work Experience is NA *and* they're a student, set WorkExp to 0 years\n    mutate(\n        WorkExp = if_else(is.na(WorkExp) & DevType == \"Student\", 0, WorkExp)\n    ) |>\n    # YearsCode has two character values\n    mutate(YearsCode = parse_number(YearsCode))\n\n# Downloaded from:\n# https://www.bankofcanada.ca/rates/exchange/daily-exchange-rates/\n# Exchange rates start on line 40 of the file\nexchange <- read_csv(\"FX_RATES_DAILY-sd-2017-01-03.csv\", skip = 39,\n    show_col_types = FALSE)\n\nexchange_join <- exchange |>\n    # Data starts with a column called date, then a column for each country.\n    # Column names have the format FX---CAD, where the --- is the country code\n    pivot_longer(\n        -date, names_prefix = \"FX\",\n        names_to = \"Currency\", values_to = \"Rate\"\n    ) |>\n    mutate(Currency = str_remove(Currency, \"CAD\")) |>\n    # Group by and filter to only use the most recent exchange rate\n    group_by(Currency) |>\n    filter(date == max(date)) |>\n    ungroup() |>\n    # Date column is extraneous\n    select(-date)\n\nso_cad <- left_join(so_work, exchange_join, by = join_by(Currency)) |>\n    mutate(CompCAD = CompTotal * Rate) |>\n    # No longer needed now that we have CAD\n    select(-Rate, -Currency, -CompTotal) |>\n    # No NAs are meaningful anymore\n    # (WorkExp was originally meaningful - students had NA for WorkExp)\n    na.omit() |>\n    mutate(\n        r = str_detect(LanguageHaveWorkedWith, \"R\"),\n        python = str_detect(LanguageHaveWorkedWith, \"Python\"),\n        julia = str_detect(LanguageHaveWorkedWith, \"Julia\"),\n        sql = str_detect(LanguageHaveWorkedWith, \"SQL\")\n    ) |>\n    select(-LanguageHaveWorkedWith) |>\n    mutate(\n        Langs = str_c(\n            if_else(r, \"R\", \"\"),\n            if_else(python, \"Python\", \"\"),\n            if_else(julia, \"Julia\", \"\"),\n            if_else(sql, \"SQL\", \"\"),\n            sep = \"_\"\n        )\n    )\n\nso_cad\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,441 × 12\n   YearsCode DevType   EdLevel WorkExp Age   DevClass CompCAD r     python julia\n       <dbl> <chr>     <chr>     <dbl> <chr> <chr>      <dbl> <lgl> <lgl>  <lgl>\n 1        15 Data sci… Master…       7 35-4… Data Sc… 127100. FALSE TRUE   TRUE \n 2         7 Student   Some C…       8 25-3… Student  153285  FALSE TRUE   FALSE\n 3        10 Academic… Master…       1 25-3… Academic  40373. TRUE  FALSE  FALSE\n 4        20 Student   Bachel…       0 25-3… Student    6729. FALSE TRUE   FALSE\n 5        19 Academic… Profes…      12 35-4… Academic 139350  FALSE TRUE   TRUE \n 6         9 Academic… Profes…       3 25-3… Academic  70021. FALSE TRUE   FALSE\n 7        20 Data sci… Profes…      15 45-5… Data Sc… 139350  TRUE  FALSE  FALSE\n 8         9 Student   Some C…       0 18-2… Student   55071. TRUE  TRUE   FALSE\n 9        11 Develope… Master…       5 25-3… Data Sc…  89718  FALSE TRUE   FALSE\n10        12 Data sci… Master…       9 35-4… Data Sc… 110558  FALSE TRUE   FALSE\n# ℹ 1,431 more rows\n# ℹ 2 more variables: sql <lgl>, Langs <chr>\n```\n\n\n:::\n:::\n\n\n\n\n# Exploratory Plots\n\n## Which languages do people know?\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nso_cad |>\n    ggplot() +\n    aes(x = fct_infreq(Langs), fill = Langs) +\n    theme(legend.position = \"none\") +\n    geom_bar() +\n    coord_flip() +\n    # scales = \"free_x\" makes it so the x-axis is different for diff facets.\n    facet_wrap(~ DevClass, scales = \"free_x\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n\n- Not many people know Julia, and those who do appear to be researchers.\n- Most people in this sample (which is specifically data-related jobs) know python, rather than R.\n-  Data Scientists that know R tend to also know Python and SQL.\n\n\n## Work/Code Experience\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nso_cad |>\n    filter(DevType != \"Student\", Age != \"Prefer not to say\") |>\n    ggplot() +\n    aes(y = WorkExp, x = YearsCode) +\n    geom_point() +\n    geom_abline(intercept = 0, slope = 1, colour = \"red\") +\n    facet_wrap(~ Age) +\n    labs(\n        x = \"Years of Coding Experience\",\n        y = \"Years of Work Experience\",\n        title = \"Working and Coding Experience, by Age Group\",\n        subtitle = \"People above the red line have been working longer than they've been coding.\"\n    )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n\n- Older people are more likely to have had to learn to code *after* they started working. Younger people have learned to code before they entered the workforce.\n- Regardless of age group, the slope of the points appears to be 1 - people have been coding at the same rate as they've been working, regardless of when they started either.\n- Those 65 year-olds have been coding for a long time!!!\n    - This probably says something about the data collection! The data only includes programmers/data scientists, so there's a bias as to who we're looking at.\n\n## Experience and Language\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nso_cad |>\n    filter(!Age %in% c(\"Prefer not to say\", \"Under 18 years old\")) |>\n    select(Age, CompCAD, YearsCode, r, python, julia, sql) |>\n    pivot_longer(-c(Age, CompCAD, YearsCode)) |>\n    filter(value) |>\n    select(-value) |>\n    ggplot() +\n    aes(x = YearsCode, y = name, fill = name) +\n    geom_density_ridges(bandwidth = 1.5, alpha = 0.75, rel_min_height = 0.05) +\n    facet_wrap(~ Age)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n\n- Most people who learned Julia have already been programming for a long time; in other words, people only learn Julia once they're comfortable with other languages.\n- 65 year-olds only know Python.\n- Distribution for R and Python are similar - looks like people are learning them at similar rates!\n    - Due to the nature of pivoting, the \"R\" and the \"Python\" plots will include many of the same people.\n\n\n# Model Plots\n\n## Wage and Coding Experience\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nso_cad |>\n    select(CompCAD, YearsCode, r, python, julia, sql) |>\n    pivot_longer(-c(CompCAD, YearsCode)) |>\n    filter(value) |>\n    select(-value) |>\n    ggplot() +\n    aes(x = YearsCode, y = CompCAD, colour = name) +\n    geom_point() +\n    geom_smooth(se = FALSE, formula = y ~ x, method = \"lm\") +\n    facet_wrap(~ name)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n\nIn the plot above, note that *many* of the points are the same across facets. The people in the \"python\" plot very likely know another language.\n\n- Regardless of which language you learn, more experience seems to increase your pay.\n\n## Wage and Language (LangWage?)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncolour_by_language <- function(language) {\n    ggplot(filter(so_cad, CompCAD < 500000)) +\n        aes(y = CompCAD, x = Langs, fill = {{ language }}) +\n        geom_boxplot() +\n        coord_flip() +\n        scale_fill_manual(\n            values = c(\"red\", \"green\")\n        ) +\n        labs(\n            x = \"Compensation (Canadian Dollars)\",\n            y = NULL,\n            title = substitute(language),\n            fill = \"Language Present?\"\n        )\n}\n\ngg_r <- colour_by_language(r)\ngg_p <- colour_by_language(python)\ngg_s <- colour_by_language(sql)\ngg_j <- colour_by_language(julia)\n\ngg_r + gg_p + gg_s + gg_j +\n    plot_layout(nrow = 1, axes = \"collect\", guides = \"collect\") +\n    plot_annotation(title = \"Which Languages Have Higher Pay?\",\n        subtitle = \"All sets of plots are the exact same except for colour\") &\n    theme(legend.position = \"bottom\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n\n- More languages appears to be associated with more pay.\n    - Especially if that language is SQL, it would seem.\n        - Note that SQL alone doesn't get you a high salary.\n    - Adding Julia also seems to increase pay, but this is likely not causal. Perhaps those who need to learn Julia are in a better job already, rather than learning Julia and then getting a better job.\n    - Python+SQL and R+SQL seem to be the best bang for your buck - with just two languages, you get almost the full benefit of Python+R+SQL+Julia\n\n## Model Plot 3: Wage, Age, and Educage\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nso_cad |>\n    filter(!Age %in% c(\"Prefer not to say\", \"Under 18 years old\")) |>\n    filter(CompCAD < 500000) |>\n    mutate(\n        EdLevel = fct_relevel(\n            EdLevel,\n            c(\"Secondary\", \"Some College/University\", \"Bachelor’s\",\n                \"Master’s\", \"Associate\", \"Professional\", \"Other\")\n        )\n    ) |>\n    ggplot() +\n    aes(x = EdLevel, y = CompCAD, fill = Age) +\n    geom_violin(scale = \"count\") + # Widths proportional to amount of data\n    facet_wrap(~ Age) +\n    coord_flip()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Groups with fewer than two datapoints have been dropped.\nℹ Set `drop = FALSE` to consider such groups for position adjustment purposes.\nGroups with fewer than two datapoints have been dropped.\nℹ Set `drop = FALSE` to consider such groups for position adjustment purposes.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n\n- For people 35-44 or 45-54 years old, a Master's means they make *less* money!?!\n    - Maybe the master's degree was in a different field than data science?\n- Professional Degrees appear to help a lot!\n- Very few people (especially yhose older than 25) have only a Seconday School education. \n- A surprising number of people in the 18-24 range have a Bachelor's degree.\n    - They may have answer \"Bachelor's\" even if they aren't yet completed?\n\n# Exploratory Modelling\n\n\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}